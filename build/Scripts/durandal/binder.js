define(["durandal/system","knockout"],function(g,e){function n(e){return void 0===e?{applyBindings:!0}:g.isBoolean(e)?{applyBindings:e}:(void 0===e.applyBindings&&(e.applyBindings=!0),e)}function a(a,p,m,w){if(!p||!m)return o.throwOnErrors?g.error(L):g.log(L,p,w),void 0;if(!p.getAttribute)return o.throwOnErrors?g.error(t):g.log(t,p,w),void 0;var r=p.getAttribute("data-view");try{var i;return a&&a.binding&&(i=a.binding(p)),i=n(i),o.binding(w,p,i),i.applyBindings?(g.log("Binding",r,w),e.applyBindings(m,p)):a&&e.utils.domData.set(p,l,{$data:a}),o.bindingComplete(w,p,i),a&&a.bindingComplete&&a.bindingComplete(p),e.utils.domData.set(p,s,i),i}catch(c){c.message=c.message+";\nView: "+r+";\nModuleId: "+g.getModuleId(w),o.throwOnErrors?g.error(c):g.log(c.message)}}var o,L="Insufficient Information to Bind",t="Unexpected View Type",s="durandal-binding-instruction",l="__ko_bindingContext__";return o={binding:g.noop,bindingComplete:g.noop,throwOnErrors:!1,getBindingInstruction:function(g){return e.utils.domData.get(g,s)},bindContext:function(g,e,n){return n&&g&&(g=g.createChildContext(n)),a(n,e,g,n||(g?g.$data:null))},bind:function(g,e){return a(g,e,g,g)}}});