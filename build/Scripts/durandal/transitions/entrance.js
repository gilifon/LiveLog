define(["durandal/system","durandal/composition","jquery"],function(e,g,n){var o=100,a={marginRight:0,marginLeft:0,opacity:1},t={marginLeft:"",marginRight:"",opacity:"",display:""},L=function(g){return e.defer(function(e){function L(){e.resolve()}function s(){g.keepScrollPosition||n(document).scrollTop(0)}function l(){s(),g.triggerAttach();var e={marginLeft:m?"0":"20px",marginRight:m?"0":"-20px",opacity:0,display:"block"},o=n(g.child);o.css(e),o.animate(a,p,"swing",function(){o.css(t),L()})}if(g.child){var p=g.duration||500,m=!!g.fadeOnly;g.activeView?n(g.activeView).fadeOut(o,l):l()}else n(g.activeView).fadeOut(o,L)}).promise()};return L});