define(["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(g,e,n,a,o){function L(){return g.defer(function(e){return 0==s.length?(e.resolve(),void 0):(g.acquire(s).then(function(n){for(var a=0;a<n.length;a++){var o=n[a];if(o.install){var L=l[a];g.isObject(L)||(L={}),o.install(L),g.log("Plugin:Installed "+s[a])}else g.log("Plugin:Loaded "+s[a])}e.resolve()}).fail(function(e){g.error("Failed to load plugin(s). Details: "+e.message)}),void 0)}).promise()}var t,s=[],l=[];return t={title:"Application",configurePlugins:function(e,n){var a=g.keys(e);n=n||"plugins/",-1===n.indexOf("/",n.length-1)&&(n+="/");for(var o=0;o<a.length;o++){var L=a[o];s.push(n+L),l.push(e[L])}},start:function(){return g.log("Application:Starting"),this.title&&(document.title=this.title),g.defer(function(e){o(function(){L().then(function(){e.resolve(),g.log("Application:Started")})})}).promise()},setRoot:function(a,o,L){var t,s={activate:!0,transition:o};t=!L||g.isString(L)?document.getElementById(L||"applicationHost"):L,g.isString(a)?e.isViewUrl(a)?s.view=a:s.model=a:s.model=a,n.compose(t,s)}},a.includeIn(t),t});